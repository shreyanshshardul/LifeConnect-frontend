{"ast":null,"code":"import _objectSpread from\"F:/MERN-STACK/LifeConnect/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Link,useNavigate}from\"react-router-dom\";import Box from\"@mui/material/Box\";import TextField from\"@mui/material/TextField\";import Button from\"@mui/material/Button\";import React,{useState}from\"react\";import{handleError,handleSuccess}from\"../utils\";import{ToastContainer}from\"react-toastify\";import\"./Signup.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_LINK=process.env.REACT_APP_BACKEND_LINK||\"http://localhost:8080\";export default function Signup(){const navigate=useNavigate();const[signupInfo,setSignupInfo]=useState({name:\"\",email:\"\",password:\"\"});const[emailError,setEmailError]=useState(false);// ✅ email validation state\nconst handleChange=e=>{const{name,value}=e.target;setSignupInfo(_objectSpread(_objectSpread({},signupInfo),{},{[name]:value}));// ✅ Strict email validation (common domains)\nif(name===\"email\"){const emailPattern=/^[a-zA-Z0-9._%+-]+@(gmail|yahoo|outlook|hotmail)\\.com$/;setEmailError(!emailPattern.test(value));}};const handleSignup=async e=>{e.preventDefault();const{name,email,password}=signupInfo;if(!name||!email||!password){return handleError(\"Please enter all the values\");}if(emailError){return handleError(\"Please enter a valid email (gmail, yahoo, outlook, hotmail)\");}try{const response=await fetch(\"\".concat(BACKEND_LINK,\"/signup\"),{method:\"POST\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify(signupInfo)});const result=await response.json();const{success,token,error,message}=result;if(success){handleSuccess(\"Registered Successfully\");if(token){localStorage.setItem(\"token\",token);navigate(\"/cards\");// direct dashboard if token returned\n}else{navigate(\"/login\");// otherwise redirect to login\n}}else if(error){var _error$details,_error$details$;const details=error===null||error===void 0?void 0:(_error$details=error.details)===null||_error$details===void 0?void 0:(_error$details$=_error$details[0])===null||_error$details$===void 0?void 0:_error$details$.message;handleError(details||\"Validation Error\");}else{handleError(message||\"Failed!!\");}}catch(err){handleError(\"Error while registering\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col d-flex justify-content-center mt-5 p-3\",children:/*#__PURE__*/_jsxs(Box,{sx:{width:{xs:\"100%\",sm:400},display:\"flex\",flexDirection:\"column\",padding:3,boxShadow:\"0px 0px 12px rgba(0,0,0,0.2)\",borderRadius:2},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center mb-3\",children:\"Create Your LifeConnect Account\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignup,style:{display:\"flex\",flexDirection:\"column\",gap:\"18px\"},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Full Name\",name:\"name\",value:signupInfo.name,onChange:handleChange}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email\",name:\"email\",value:signupInfo.email,onChange:handleChange,error:emailError// ✅ red underline if invalid\n,helperText:emailError?\"Use a valid email (gmail, yahoo, outlook, hotmail)\":\"\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Password\",type:\"password\",name:\"password\",value:signupInfo.password,onChange:handleChange}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",fullWidth:true,sx:{mt:1,backgroundColor:\"#cf2b2b\",\"&:hover\":{backgroundColor:\"#b12222\"}},children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mt-2\",children:[\"Already have an account?\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/login\",style:{color:\"#cf2b2b\",textDecoration:\"none\"},children:\"Login\"})]})]}),/*#__PURE__*/_jsx(ToastContainer,{})]})})})});}","map":{"version":3,"names":["Link","useNavigate","Box","TextField","Button","React","useState","handleError","handleSuccess","ToastContainer","jsx","_jsx","jsxs","_jsxs","BACKEND_LINK","process","env","REACT_APP_BACKEND_LINK","Signup","navigate","signupInfo","setSignupInfo","name","email","password","emailError","setEmailError","handleChange","e","value","target","_objectSpread","emailPattern","test","handleSignup","preventDefault","response","fetch","concat","method","headers","body","JSON","stringify","result","json","success","token","error","message","localStorage","setItem","_error$details","_error$details$","details","err","className","children","sx","width","xs","sm","display","flexDirection","padding","boxShadow","borderRadius","onSubmit","style","gap","fullWidth","label","onChange","helperText","type","variant","mt","backgroundColor","to","color","textDecoration"],"sources":["F:/MERN-STACK/LifeConnect/frontend/src/Landing_pages/Register/Signup.js"],"sourcesContent":["import { Link, useNavigate } from \"react-router-dom\";\r\nimport Box from \"@mui/material/Box\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Button from \"@mui/material/Button\";\r\nimport React, { useState } from \"react\";\r\nimport { handleError, handleSuccess } from \"../utils\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"./Signup.css\";\r\nconst BACKEND_LINK =\r\n  process.env.REACT_APP_BACKEND_LINK || \"http://localhost:8080\";\r\n\r\nexport default function Signup() {\r\n  const navigate = useNavigate();\r\n\r\n  const [signupInfo, setSignupInfo] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const [emailError, setEmailError] = useState(false); // ✅ email validation state\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setSignupInfo({ ...signupInfo, [name]: value });\r\n\r\n    // ✅ Strict email validation (common domains)\r\n    if (name === \"email\") {\r\n      const emailPattern = /^[a-zA-Z0-9._%+-]+@(gmail|yahoo|outlook|hotmail)\\.com$/;\r\n      setEmailError(!emailPattern.test(value));\r\n    }\r\n  };\r\n\r\n  const handleSignup = async (e) => {\r\n    e.preventDefault();\r\n    const { name, email, password } = signupInfo;\r\n\r\n    if (!name || !email || !password) {\r\n      return handleError(\"Please enter all the values\");\r\n    }\r\n\r\n    if (emailError) {\r\n      return handleError(\"Please enter a valid email (gmail, yahoo, outlook, hotmail)\");\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${BACKEND_LINK}/signup`, {\r\n        method: \"POST\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify(signupInfo),\r\n      });\r\n\r\n      const result = await response.json();\r\n      const { success, token, error, message } = result;\r\n\r\n      if (success) {\r\n        handleSuccess(\"Registered Successfully\");\r\n\r\n        if (token) {\r\n          localStorage.setItem(\"token\", token);\r\n          navigate(\"/cards\"); // direct dashboard if token returned\r\n        } else {\r\n          navigate(\"/login\"); // otherwise redirect to login\r\n        }\r\n      } else if (error) {\r\n        const details = error?.details?.[0]?.message;\r\n        handleError(details || \"Validation Error\");\r\n      } else {\r\n        handleError(message || \"Failed!!\");\r\n      }\r\n    } catch (err) {\r\n      handleError(\"Error while registering\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className=\"row mt-5\">\r\n        <div className=\"col d-flex justify-content-center mt-5 p-3\">\r\n          <Box\r\n            sx={{\r\n              width: { xs: \"100%\", sm: 400 },\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              padding: 3,\r\n              boxShadow: \"0px 0px 12px rgba(0,0,0,0.2)\",\r\n              borderRadius: 2,\r\n            }}\r\n          >\r\n            <h3 className=\"text-center mb-3\">Create Your LifeConnect Account</h3>\r\n\r\n            <form\r\n              onSubmit={handleSignup}\r\n              style={{ display: \"flex\", flexDirection: \"column\", gap: \"18px\" }}\r\n            >\r\n              <TextField\r\n                fullWidth\r\n                label=\"Full Name\"\r\n                name=\"name\"\r\n                value={signupInfo.name}\r\n                onChange={handleChange}\r\n              />\r\n\r\n              <TextField\r\n                fullWidth\r\n                label=\"Email\"\r\n                name=\"email\"\r\n                value={signupInfo.email}\r\n                onChange={handleChange}\r\n                error={emailError} // ✅ red underline if invalid\r\n                helperText={emailError ? \"Use a valid email (gmail, yahoo, outlook, hotmail)\" : \"\"}\r\n              />\r\n\r\n              <TextField\r\n                fullWidth\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                name=\"password\"\r\n                value={signupInfo.password}\r\n                onChange={handleChange}\r\n              />\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                fullWidth\r\n                sx={{\r\n                  mt: 1,\r\n                  backgroundColor: \"#cf2b2b\",\r\n                  \"&:hover\": { backgroundColor: \"#b12222\" },\r\n                }}\r\n              >\r\n                Sign Up\r\n              </Button>\r\n\r\n              <p className=\"text-center mt-2\">\r\n                Already have an account?{\" \"}\r\n                <Link\r\n                  to=\"/login\"\r\n                  style={{ color: \"#cf2b2b\", textDecoration: \"none\" }}\r\n                >\r\n                  Login\r\n                </Link>\r\n              </p>\r\n            </form>\r\n\r\n            <ToastContainer />\r\n          </Box>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}