{"ast":null,"code":"import _objectSpread from\"F:/MERN-STACK/LifeConnect/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./Cards.css\";// ✅ Ensure fallback for local dev\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_LINK=process.env.REACT_APP_BACKEND_LINK||\"http://localhost:8080\";export default function Cards(_ref){let{search}=_ref;const[donors,setDonors]=useState([]);const[recipients,setRecipients]=useState([]);const[mergedCards,setMergedCards]=useState([]);const[loading,setLoading]=useState(true);const[filteredCards,setFilteredCards]=useState([]);useEffect(()=>{const fetchData=async()=>{try{const donorRes=await axios.get(\"\".concat(BACKEND_LINK,\"/cards/donar\"));const recRes=await axios.get(\"\".concat(BACKEND_LINK,\"/cards/recipient\"));setDonors(donorRes.data.donors||[]);setRecipients(recRes.data.recipient||[]);setLoading(false);}catch(err){console.error(\"Failed to fetch cards:\",err);setLoading(false);}};fetchData();},[]);// Merge donors + recipients\nuseEffect(()=>{const temp=[];const maxLen=Math.max(donors.length,recipients.length);for(let i=0;i<maxLen;i++){if(donors[i])temp.push(_objectSpread(_objectSpread({},donors[i]),{},{type:\"donor\"}));if(recipients[i])temp.push(_objectSpread(_objectSpread({},recipients[i]),{},{type:\"recipient\"}));}setMergedCards(temp);},[donors,recipients]);// Filter cards based on search\nuseEffect(()=>{const searchText=(search===null||search===void 0?void 0:search.trim().toLowerCase())||\"\";const filtered=mergedCards.filter(u=>{var _u$name,_u$city,_u$blood_group,_u$type;if(!u)return false;const name=((_u$name=u.name)===null||_u$name===void 0?void 0:_u$name.toLowerCase())||\"\";const city=((_u$city=u.city)===null||_u$city===void 0?void 0:_u$city.toLowerCase())||\"\";const bg=((_u$blood_group=u.blood_group)===null||_u$blood_group===void 0?void 0:_u$blood_group.toLowerCase())||\"\";const type=((_u$type=u.type)===null||_u$type===void 0?void 0:_u$type.toLowerCase())||\"\";return name.includes(searchText)||city.includes(searchText)||bg.includes(searchText)||type.includes(searchText);});setFilteredCards(filtered);},[search,mergedCards]);if(loading)return/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-white mt-5\",children:\"Loading...\"});return/*#__PURE__*/_jsx(\"div\",{className:\"parallax-bg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container card-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"cards-heading text-center mb-5\",children:\"Available Donors & Recipients\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4 justify-content-center\",children:[filteredCards.length===0&&/*#__PURE__*/_jsx(\"h4\",{className:\"text-center text-black\",children:\"No results found\"}),filteredCards.map((user,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10 col-md-6 col-lg-4 d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-custom shadow-lg \".concat(user.type===\"donor\"?\"donor-card\":\"recipient-card\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge-tag \".concat(user.type===\"donor\"?\"donor-badge\":\"recipient-badge\"),children:user.type===\"donor\"?\"Donor\":\"Recipient\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"profile\",className:\"card-img-top\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"fw-bold mb-2\",children:user.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"m-0 fs-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Age:\"}),\" \",user.age,\" | \",/*#__PURE__*/_jsx(\"strong\",{children:\"City:\"}),\" \",user.city]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 fs-6\",children:user.type===\"donor\"?\"Blood Group: \".concat(user.blood_group):\"Required: \".concat(user.blood_group)}),/*#__PURE__*/_jsx(\"button\",{className:\"contact-btn mt-2\",children:\"Contact me\"})]})]})},index))]})]})});}","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","BACKEND_LINK","process","env","REACT_APP_BACKEND_LINK","Cards","_ref","search","donors","setDonors","recipients","setRecipients","mergedCards","setMergedCards","loading","setLoading","filteredCards","setFilteredCards","fetchData","donorRes","get","concat","recRes","data","recipient","err","console","error","temp","maxLen","Math","max","length","i","push","_objectSpread","type","searchText","trim","toLowerCase","filtered","filter","u","_u$name","_u$city","_u$blood_group","_u$type","name","city","bg","blood_group","includes","className","children","map","user","index","src","alt","age"],"sources":["F:/MERN-STACK/LifeConnect/frontend/src/Landing_pages/Dashboard/Cards.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Cards.css\";\r\n\r\n// ✅ Ensure fallback for local dev\r\nconst BACKEND_LINK =\r\n  process.env.REACT_APP_BACKEND_LINK || \"http://localhost:8080\";\r\n\r\n\r\nexport default function Cards({ search }) {\r\n  const [donors, setDonors] = useState([]);\r\n  const [recipients, setRecipients] = useState([]);\r\n  const [mergedCards, setMergedCards] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filteredCards, setFilteredCards] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const donorRes = await axios.get(`${BACKEND_LINK}/cards/donar`);\r\n        const recRes = await axios.get(`${BACKEND_LINK}/cards/recipient`);\r\n\r\n        setDonors(donorRes.data.donors || []);\r\n        setRecipients(recRes.data.recipient || []);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch cards:\", err);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Merge donors + recipients\r\n  useEffect(() => {\r\n    const temp = [];\r\n    const maxLen = Math.max(donors.length, recipients.length);\r\n\r\n    for (let i = 0; i < maxLen; i++) {\r\n      if (donors[i]) temp.push({ ...donors[i], type: \"donor\" });\r\n      if (recipients[i]) temp.push({ ...recipients[i], type: \"recipient\" });\r\n    }\r\n\r\n    setMergedCards(temp);\r\n  }, [donors, recipients]);\r\n\r\n  // Filter cards based on search\r\n  useEffect(() => {\r\n    const searchText = search?.trim().toLowerCase() || \"\";\r\n    const filtered = mergedCards.filter((u) => {\r\n      if (!u) return false;\r\n      const name = u.name?.toLowerCase() || \"\";\r\n      const city = u.city?.toLowerCase() || \"\";\r\n      const bg = u.blood_group?.toLowerCase() || \"\";\r\n      const type = u.type?.toLowerCase() || \"\";\r\n\r\n      return (\r\n        name.includes(searchText) ||\r\n        city.includes(searchText) ||\r\n        bg.includes(searchText) ||\r\n        type.includes(searchText)\r\n      );\r\n    });\r\n\r\n    setFilteredCards(filtered);\r\n  }, [search, mergedCards]);\r\n\r\n  if (loading) return <h2 className=\"text-center text-white mt-5\">Loading...</h2>;\r\n\r\n  return (\r\n    <div className=\"parallax-bg\">\r\n      <div className=\"container card-container\">\r\n        <h2 className=\"cards-heading text-center mb-5\">\r\n          Available Donors & Recipients\r\n        </h2>\r\n\r\n        <div className=\"row g-4 justify-content-center\">\r\n          {filteredCards.length === 0 && (\r\n            <h4 className=\"text-center text-black\">No results found</h4>\r\n          )}\r\n\r\n          {filteredCards.map((user, index) => (\r\n            <div key={index} className=\"col-sm-10 col-md-6 col-lg-4 d-flex justify-content-center\">\r\n              <div className={`card card-custom shadow-lg ${user.type === \"donor\" ? \"donor-card\" : \"recipient-card\"}`}>\r\n                <span className={`badge-tag ${user.type === \"donor\" ? \"donor-badge\" : \"recipient-badge\"}`}>\r\n                  {user.type === \"donor\" ? \"Donor\" : \"Recipient\"}\r\n                </span>\r\n\r\n                <img src=\"/logo.png\" alt=\"profile\" className=\"card-img-top\" />\r\n\r\n                <div className=\"card-body text-center\">\r\n                  <h4 className=\"fw-bold mb-2\">{user.name}</h4>\r\n                  <p className=\"m-0 fs-6\">\r\n                    <strong>Age:</strong> {user.age} | <strong>City:</strong> {user.city}\r\n                  </p>\r\n                  <p className=\"mt-2 fs-6\">\r\n                    {user.type === \"donor\" ? `Blood Group: ${user.blood_group}` : `Required: ${user.blood_group}`}\r\n                  </p>\r\n                  <button className=\"contact-btn mt-2\">Contact me</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}